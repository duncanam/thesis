\chapter{Governing Equations}
\label{math}

\section{Fluid Modeling}
In order to model detonations, the problem can be broken up into smaller pieces and solved with CFD. OpenFOAM is computational toolbox that will utilize the finite volume method (FVM) to solve the set of partial differential equations describing the fluid flow. In the FVM, the computational domain is broken into multiple smaller control volumes, known as cells. Each cell contains a set of thermo-fluid properties at the centroid. The differential equations are then integrated over this control volume in order to obtain a solution at each cell. The solution is interpolated between cell centroids to obtain continuous solution throughout the domain. 

The solution for the fluid problem explored in this thesis work is approximated through density, momentum, species, and energy equations in that order. The solver used to approximate these equations in a discretized computational domain, \verb|rhoReactingCentralFoam|, utilizes the central-upwind schemes developed by Kurganov, Noelle, and Petrova \cite{kurganov}. The density equation solved by \verb|rhoReactingCentralFoam| is
\begin{equation}
\frac{\partial \rho}{\partial t} + \nabla \cdot \left(\rho \bm{u}\right) = 0,
\end{equation}
the momentum equation is
\begin{equation}
x
\end{equation}
the specie equation is
\[other things,\]
and the energy equation is
\[last thing.\]
These sets of equations are solved using OpenFOAM's differential equation time step integrators. Different equation solvers can be selected for different quantities of interest. For quantities like velocity, internal energy, and specie, the preconditioned biconjugate gradient stabilized method is used (\verb|PBiCGStab| in OpenFOAM). For solvers like this, preconditioners can be selected as well as solution tolerance and relative tolerance. 

\textbf{\color{red} Add more here please}


\section{Reaction Modeling and Chemistry}
Since detonation modeling consists of both a fluids problem as well as chemical problem, chemical reactions must also be considered. Like a fire, a detonation requires a fuel and an oxidizer. Typically detonations in experimental and computational modeling will utilize gaseous hydrogen or methane fuels mixed with air or pure oxygen oxidizers. For the computational modeling here, hydrogen-air was the primary respective fuel-oxidizer combination utilized for exploring detonation modeling. This was due to the highly reactive nature of hydrogen as well as previous computational and experimental modeling resources available. The reaction used for the hydrogen detonation modeling here is
\begin{center}
%\ch{Na2SO4 ->[ H2O ] Na+ + SO4^2-}
\ch{2 H2 + 2 (O2 + 3.76 N2) -> 2 H2O + 7.52 N2}
\end{center}
This is a stoichiometric reaction between diatomic hydrogen gas and air. When converted to mass fraction \(Y\) for OpenFOAM \cite{marcantoni}, it becomes Table \ref{tab:y}.
\begin{table}[H]
\centering
\caption{Specie mass fraction initial condition}
\label{tab:y}
\begin{tabular}{cc}
Specie & Mass Fraction \\ \hline
H\(_2\) & 0.02851 \\ 
H\(_2\)O & 0 \\
N\(_2\) & 0.745 \\ 
O\(_2\) & 0.226 \\ 
Total & 0.99951 \\ 
\end{tabular}
\end{table}

Other trace elements present in air are not modeled here, and this could be a topic of further study within the context of OpenFOAM detonation modeling with AMR. Additionally, a single-step reaction was modeled as opposed to several reactions together to model hydrogen-air detonations. While more steps are certainly more realistic, adding further reaction complexity was found to significantly increase computational expense. It was decided that gaining a better baseline understanding of how AMR could improve modeling efficiency in OpenFOAM was the focus here and thus further work on increasing the reaction complexity and accuracy was not performed. 

The chemical reaction rate can be modeled OpenFOAM with the Arrhenius equation \cite{christ} which takes the form: 
\begin{equation}
k = AT^\beta \exp\left(\frac{Ea}{R T}\right)
\end{equation}
where 
\begin{tabbing}
\qquad \= \(k\) \qquad \= reaction rate \\ 
\> \(A\) \> pre-exponential factor \\
\> \(T\) \> temperature \\
\> \(\beta\) \> temperature exponent \\
\> \(Ea\) \> activation energy \\
\> \(R\) \> specific gas constant 
\end{tabbing}

\noindent OpenFOAM requests \verb|A|, \verb|beta|, and \verb|Ta|. We can write \(Ta = \frac{Ea}{R }\). While in later sections the effect of \(A\) is explored on the solution, the values landed on for numerical simulation in this work are:
\begin{equation}
   A = 1.4 \times 10^{13} ~ \text{m}^3\text{mol}^{-1}s^{-1},
   \qquad 
   Ta = 12996 ~\text{K},
   \qquad
   \beta = 0
\end{equation}
\noindent In addition, the specific gas constant used is \(R = 368.9\) J/Kg-K. It is seen in Chapter \ref{sec:a} that the values used are reasonably close to Chapman-Jouguet theory as well as other published values \cite{towery1}\cite{hashemi}. 





